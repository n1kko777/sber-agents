# –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ —Å–æ–≤–µ—Ç–Ω–∏–∫–∞

## üìä –û—Ç—á–µ—Ç –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ

| –ò—Ç–µ—Ä–∞—Ü–∏—è | –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª | –°—Ç–∞—Ç—É—Å | –î–∞—Ç–∞ |
|----------|------------|--------|------|
| 1 | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ–ø–µ–Ω—Å–æ—Ä—Å–Ω–æ–π –º–æ–¥–µ–ª—å—é —á–µ—Ä–µ–∑ OpenRouter | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ | 2025-10-30 |
| 2 | –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –æ–ø–µ–Ω—Å–æ—Ä—Å–Ω–æ–π –º–æ–¥–µ–ª—å—é —á–µ—Ä–µ–∑ OpenRouter | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ | 2025-10-30 |
| 3 | –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –æ –±–∞–ª–∞–Ω—Å–µ –∏ —Å–ø–∏—Å–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ | 2025-01-30 |
| 4 | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é —á–µ—Ä–µ–∑ Ollama | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ | 2025-10-30 |
| 5 | –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é —á–µ—Ä–µ–∑ Ollama | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ | 2025-10-30 |
| 6 | –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (OpenAI Whisper —á–µ—Ä–µ–∑ OpenRouter / faster-whisper) | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ | 2025-11-06 |

**–õ–µ–≥–µ–Ω–¥–∞ —Å—Ç–∞—Ç—É—Å–æ–≤:**
- ‚è≥ –ù–µ –Ω–∞—á–∞—Ç–æ
- üöß –í —Ä–∞–±–æ—Ç–µ
- ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
- ‚ùå –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ

---

## üöÄ –ò—Ç–µ—Ä–∞—Ü–∏–∏

### –ò—Ç–µ—Ä–∞—Ü–∏—è 1: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ–ø–µ–Ω—Å–æ—Ä—Å–Ω–æ–π –º–æ–¥–µ–ª—å—é —á–µ—Ä–µ–∑ OpenRouter

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏–∑ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º structured output —á–µ—Ä–µ–∑ OpenRouter

- [x] –°–æ–∑–¥–∞—Ç—å `src/models.py` —Å Pydantic –º–æ–¥–µ–ª—è–º–∏ (Transaction, TransactionResponse, TransactionType, TransactionFrequency)
- [x] –û–±–Ω–æ–≤–∏—Ç—å `src/config.py`: –¥–æ–±–∞–≤–∏—Ç—å SYSTEM_PROMPT_TEXT
- [x] –û–±–Ω–æ–≤–∏—Ç—å `src/llm.py`: –º–µ—Ç–æ–¥ `get_transaction_response_text()` —Å structured output —á–µ—Ä–µ–∑ `response_format` (JSON schema –∏–∑ Pydantic)
- [x] –û–±–Ω–æ–≤–∏—Ç—å `src/handlers.py`: 
  - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ `transactions: dict[int, list[Transaction]]`, –ø–æ–∫–∞–∑–æ–º –æ—Ç–≤–µ—Ç–∞ + —Å—Ç–∞—Ç—É—Å + –±–∞–ª–∞–Ω—Å
  - –û–±–Ω–æ–≤–∏—Ç—å `/start`: –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ LLM (—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ—Ç–≤–µ—Ç–∞ + –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)
- [x] –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `pydantic` –≤ `pyproject.toml`

**–ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/start` ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—á–∏—Å—Ç–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: "–°–µ–≥–æ–¥–Ω—è –∫—É–ø–∏–ª –ø—Ä–æ–¥—É–∫—Ç—ã –Ω–∞ 1500 —Ä—É–±–ª–µ–π"
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–¥–∞—Ç–∞, —Å—É–º–º–∞, –∫–∞—Ç–µ–≥–æ—Ä–∏—è)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –ø–∞–º—è—Ç–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ LLM + —Å—Ç–∞—Ç—É—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π + –±–∞–ª–∞–Ω—Å
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ LLM –≤ –∫–æ–Ω—Å–æ–ª–∏

---

### –ò—Ç–µ—Ä–∞—Ü–∏—è 2: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –æ–ø–µ–Ω—Å–æ—Ä—Å–Ω–æ–π –º–æ–¥–µ–ª—å—é —á–µ—Ä–µ–∑ OpenRouter

**–¶–µ–ª—å:** –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—á–µ–∫–∏, —Å–∫—Ä–∏–Ω—à–æ—Ç—ã) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º VLM —á–µ—Ä–µ–∑ OpenRouter

- [x] –û–±–Ω–æ–≤–∏—Ç—å `src/config.py`: –¥–æ–±–∞–≤–∏—Ç—å SYSTEM_PROMPT_IMAGE (–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ —Ñ–∞–π–ª–∞)
- [x] –û–±–Ω–æ–≤–∏—Ç—å `src/llm.py`: –º–µ—Ç–æ–¥ `get_transaction_response_image()` —Å structured output –∏ vision API (base64 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- [x] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ `src/handlers.py`: –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ Telegram (`message.photo` –∏–ª–∏ `message.document`), –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ base64, –ø–µ—Ä–µ–¥–∞—á–∞ –≤ LLM
- [x] –¢–µ –∂–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞, —á—Ç–æ –∏ –¥–ª—è —Ç–µ–∫—Å—Ç–∞
- [x] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ LLM –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ—Ç–≤–µ—Ç–∞ + –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)

**–ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ–∫–∞ –≤ Telegram
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏–∑ —á–µ–∫–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ + —Å—Ç–∞—Ç—É—Å + –±–∞–ª–∞–Ω—Å
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ LLM –≤ –∫–æ–Ω—Å–æ–ª–∏

---

### –ò—Ç–µ—Ä–∞—Ü–∏—è 3: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –æ –±–∞–ª–∞–Ω—Å–µ –∏ —Å–ø–∏—Å–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç—á–µ—Ç–∞ –æ –±–∞–ª–∞–Ω—Å–µ, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ –∏ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

- [x] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã `/balance` –≤ `src/handlers.py`
- [x] –†–∞—Å—á–µ—Ç –±–∞–ª–∞–Ω—Å–∞ (–¥–æ—Ö–æ–¥—ã - —Ä–∞—Å—Ö–æ–¥—ã), –æ–±—â–∏—Ö –¥–æ—Ö–æ–¥–æ–≤, –æ–±—â–∏—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏–∑ `transactions[chat_id]`
- [x] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, —Å—É–º–º–∞ –ø–æ –∫–∞–∂–¥–æ–π)
- [x] –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- [x] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã `/transactions` –≤ `src/handlers.py`
- [x] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –¥–∞—Ç–æ–π, —Ç–∏–ø–æ–º, —Å—É–º–º–æ–π, –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π
- [x] –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ –¥–∞—Ç–µ (–æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º)
- [x] –†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ Telegram

**–ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- –î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (–¥–æ—Ö–æ–¥—ã –∏ —Ä–∞—Å—Ö–æ–¥—ã)
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/balance`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞—Å—á–µ—Ç–∞ –±–∞–ª–∞–Ω—Å–∞, –¥–æ—Ö–æ–¥–æ–≤, —Ä–∞—Å—Ö–æ–¥–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/transactions`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π

---

### –ò—Ç–µ—Ä–∞—Ü–∏—è 4: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é —á–µ—Ä–µ–∑ Ollama

**–¶–µ–ª—å:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏ —á–µ—Ä–µ–∑ Ollama

- [x] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Ollama –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å
- [x] –ò–∑–º–µ–Ω–∏—Ç—å –≤ `.env`:
  - `OPENAI_BASE_URL=http://localhost:11434/v1`
  - `MODEL_TEXT=llama3.2` (–∏–ª–∏ –¥—Ä—É–≥–∞—è –º–æ–¥–µ–ª—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π structured output)
- [x] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é
- [x] –°–æ–∑–¥–∞—Ç—å `.env.example` —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –¥–ª—è Ollama
- [x] –û–±–Ω–æ–≤–∏—Ç—å `README.md` —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Ollama

**–ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Ollama –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å
- –ò–∑–º–µ–Ω–∏—Ç—å `OPENAI_BASE_URL` –∏ `MODEL` –≤ `.env` –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è Ollama
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é

---

### –ò—Ç–µ—Ä–∞—Ü–∏—è 5: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é —á–µ—Ä–µ–∑ Ollama

**–¶–µ–ª—å:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏ Ollama

- [x] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ª–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç vision (–Ω–∞–ø—Ä–∏–º–µ—Ä, llama3.2-vision)
- [x] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é

**–ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ª–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç vision (–Ω–∞–ø—Ä–∏–º–µ—Ä, llama3.2-vision)
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –º–æ–¥–µ–ª—å –≤ `.env` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `MODEL=llama3.2-vision`)
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ–∫–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É VLM —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é

---

### –ò—Ç–µ—Ä–∞—Ü–∏—è 6: –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

**–¶–µ–ª—å:** –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π Telegram: —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å —Ä–µ—á—å –∏ –∏–∑–≤–ª–µ–∫–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–∑ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞.

- [x] –î–æ–±–∞–≤–∏—Ç—å –º–æ–¥—É–ª—å `src/stt.py`:
  - `convert_to_wav()` ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è OGG/Opus ‚Üí WAV 16 kHz mono (ffmpeg)
  - `transcribe_audio()` ‚Äî –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã: `openai` (Whisper API) –∏ `faster_whisper` (–ª–æ–∫–∞–ª—å–Ω–æ)
- [x] –û–±–Ω–æ–≤–∏—Ç—å `src/config.py` ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã STT:
  - `STT_PROVIDER`, `STT_LANGUAGE`, `OPENAI_STT_API_KEY`, `OPENAI_AUDIO_BASE_URL`, `STT_OPENAI_MODEL`
  - `STT_LOCAL_MODEL`, `STT_DEVICE`, `STT_COMPUTE_TYPE`
- [x] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `voice/audio` –≤ `src/handlers.py`:
  - –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∏–∑ Telegram ‚Üí `ffmpeg` –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è ‚Üí —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è ‚Üí –≤—ã–∑–æ–≤ LLM –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
- [x] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:
  - `README.md` ‚Äî —Ä–∞–∑–¥–µ–ª –ø—Ä–æ –≥–æ–ª–æ—Å–æ–≤—ã–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫—É `ffmpeg`
  - `docs/idea.md`, `docs/vision.md` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã STT
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

**–ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `ffmpeg` (macOS: `brew install ffmpeg`, Ubuntu/Debian: `apt-get install ffmpeg`)
- –í `.env` —É–∫–∞–∑–∞—Ç—å
  - –¥–ª—è OpenAI: `STT_PROVIDER=openai`, `OPENAI_AUDIO_BASE_URL=https://api.openai.com/v1`, `OPENAI_STT_API_KEY=...`
  - –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ: `STT_PROVIDER=faster_whisper` –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `uv add "faster-whisper>=1.0.0"`
- –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞: `make run`
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º (5‚Äì20 —Å–µ–∫—É–Ω–¥)
- –û–∂–∏–¥–∞—Ç—å –æ—Ç–≤–µ—Ç —Å –±–ª–æ–∫–æ–º ¬´üó£Ô∏è –†–∞—Å–ø–æ–∑–Ω–∞–ª —Ç–µ–∫—Å—Ç¬ª, —Å—Ç–∞—Ç—É—Å–æ–º –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –±–∞–ª–∞–Ω—Å–æ–º

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Ä–∞—Å–ø–æ–∑–Ω–∞—é—Ç—Å—è, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è, –±–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è.


## üìù –ó–∞–º–µ—Ç–∫–∏

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏:
1. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤ —Ç–∞–±–ª–∏—Ü–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–æ—Ç–∞
3. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

**–ü—Ä–∏–Ω—Ü–∏–ø—ã:**
- –ö–∞–∂–¥–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- –ö–∞–∂–¥–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞
- –ü–ª–∞–Ω –ª–∞–∫–æ–Ω–∏—á–Ω—ã–π, —Ç–æ–ª—å–∫–æ –≥–ª–∞–≤–Ω–æ–µ, –ø—Ä–∏–Ω—Ü–∏–ø KISS
