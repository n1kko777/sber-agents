## Наблюдения

- Какой инструмент реализовали?  
  Реализован набор инструментов в `src/tools.py`: основной `rag_search` для получения контекста из проиндексированных документов Сбербанка, вспомогательные `currency_rates`/`currency_converter` для курсов СБОЛ и `tavily_search` для внешнего веб-поиска (при наличии `TAVILY_API_KEY`).

- Как агент принимает решения о вызове инструментов?  
  Агент собран через `langchain.agents.create_agent` в `src/agent.py` с LLM (`ChatOpenAI`) и списком инструментов, состояние чатов хранится в `MemorySaver`. Системный промпт `prompts/agent_system.txt` дает явные правила: когда обращаться к `rag_search` (кредиты, вклады, условия), когда использовать валютные утилиты или Tavily, а когда отвечать напрямую. Внутренний ReAct-цикл (Reason→Act→Respond) сам решает вызывать ли инструмент, может делать несколько вызовов за один запрос и логирует шаги/граф вызовов.

- Чем агент отличается от простой RAG-цепочки?  
  Вместо статичной цепочки retrieval→LLM используется агент с несколькими инструментами и политикой выбора действий: он может комбинировать RAG с внешним поиском и расчетами, хранит пер-чатовую историю для многошагового диалога, строит mermaid-граф вызовов (`/graph`) и умеет выполнять команды `/index`, `/evaluate_dataset`, показывая конфигурацию и метрики.

- Какие преимущества и ограничения вы заметили?  
  Преимущества: гибкие режимы поиска (semantic/hybrid/hybrid_reranker с переранжированием), отдельный системный промпт для управления политикой, MemorySaver для контекста диалога, структурированные результаты `rag_search` и логирование шагов, встроенные утилиты курсов/конвертации и веб-поиска для актуальных данных. Ограничения: in-memory векторное хранилище теряет индекс при перезапуске и требует `/index`, Tavily и LLM зависят от внешних ключей/сети, cross-encoder для rerank может быть тяжелым, инструменты дают ответы только по тексту (нет файлов/мультимедиа), а качество поиска напрямую зависит от полноты загруженных PDF/JSON.
